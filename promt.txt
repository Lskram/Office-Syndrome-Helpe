üîÅ Prompt ‚Äî ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ Flutter Android (‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á, ‡πÇ‡∏Ñ‡πâ‡∏î, tests, docs, build scripts)

Context / Precondition (‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô):

‡πÉ‡∏ô repo ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå Requirement ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà: docs/New Requiment (‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ‡πÄ‡∏î‡∏¥‡∏°‡∏ô‡∏∞).txt (‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå Requirement ‡∏ó‡∏µ‡πà‡∏â‡∏±‡∏ô‡πÅ‡∏ô‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô repo) ‚Äî ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πÄ‡∏õ‡∏Ñ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (Office Syndrome Helper v2.0 + ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ Flutter ‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 0 ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Android ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (minSdk 26, compile/targetSdk 34) ‚Äî ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (local-only).

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡πÉ‡∏´‡πâ ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏ô ASSUMPTIONS.md.

‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ placeholder ‡πÄ‡∏ä‡πà‡∏ô ... ‡∏´‡∏£‡∏∑‡∏≠ // TODO ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö ‚Äî ‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡∏•‡πå‡πÑ‡∏î‡πâ (null-safety) ‡πÅ‡∏•‡∏∞‡∏ú‡πà‡∏≤‡∏ô flutter analyze.

Global constraints:

Flutter stable 3.22.x (‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏≠‡∏Å‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô README) ‡πÅ‡∏•‡∏∞ Dart 3.x

Android: minSdk=26, compileSdk=34, targetSdk=34

Local DB: Hive (‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏î‡πâ‡∏ß‡∏¢ key ‡πÉ‡∏ô flutter_secure_storage)

State management: GetX

Notifications: flutter_local_notifications, android_alarm_manager_plus, timezone

Permissions: permission_handler (POST_NOTIFICATIONS, SCHEDULE_EXACT_ALARM, VIBRATE, RECEIVE_BOOT_COMPLETED, FOREGROUND_SERVICE, WAKE_LOCK)

Localization: intl + ARB files (th default, en)

No network: ‡πÅ‡∏≠‡∏õ ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥ request ‡∏≠‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï / ‡∏´‡πâ‡∏≤‡∏°‡∏£‡∏ß‡∏° analytics ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å

Build target: APK sideload only (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á Play Store)

Dependencies (‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ô pubspec.yaml):

dependencies:
  flutter:
    sdk: flutter
  get: ^4.6.6
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  flutter_local_notifications: ^17.2.2
  timezone: ^0.9.4
  android_alarm_manager_plus: ^4.0.3
  permission_handler: ^11.3.1
  percent_indicator: ^4.2.1
  uuid: ^4.4.0
  intl: ^0.19.0
  cupertino_icons: ^1.0.2
  google_fonts: ^6.2.1

dev_dependencies:
  hive_generator: ^2.0.1
  build_runner: ^2.4.9
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0


(‡∏´‡∏≤‡∏Å AI ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô ‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÉ‡∏ô README)

üéØ Deliverables ‚Äî ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå/commit ‡πÉ‡∏ô repo

Project skeleton (/) ‚Äî ‡∏ä‡∏∑‡πà‡∏≠ package ‡πÄ‡∏ä‡πà‡∏ô com.yourcompany.officesyndromehelper (‡πÅ‡∏Å‡πâ‡∏ï‡∏≤‡∏° repo)

pubspec.yaml ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏° dependencies ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô + assets + l10n config

lib/ ‡πÄ‡∏ï‡πá‡∏°: ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏° feature-first:

lib/
  main.dart
  app.dart
  routes.dart
  controllers/
    notification_controller.dart
    settings_controller.dart
    home_controller.dart
    statistics_controller.dart
  models/
    user_settings.dart
    notification_session.dart
    break_period.dart
  services/
    database_service.dart
    notification_service.dart
    permission_service.dart
    random_service.dart
    timezone_service.dart
  pages/
    splash_page.dart
    home_page.dart
    todo_page.dart
    settings_page.dart
    statistics_page.dart
  widgets/
    live_countdown_widget.dart
    test_notification_button.dart
  utils/
    constants.dart
    helpers.dart
  l10n/
    intl_en.arb
    intl_th.arb


Hive models annotated for hive_generator with fixed typeIds. (‡∏£‡∏∞‡∏ö‡∏∏ TypeIds ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‚Äî e.g., UserSettings typeId=0, NotificationSession typeId=1, BreakPeriod typeId=2) ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô codegen (‡πÑ‡∏ü‡∏•‡πå .g.dart) ‚Äî ‡πÉ‡∏´‡πâ‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å generate ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô repo (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ user run build_runner).

Seed data: assets/data/treatments.json (25 ‡∏ó‡πà‡∏≤‡∏ï‡∏≤‡∏° Requirement) ‡πÅ‡∏•‡∏∞ loader code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≠‡∏ô first-run ‡∏´‡∏≤‡∏Å Hive ‡∏ß‡πà‡∏≤‡∏á

Android setup:

android/app/src/main/AndroidManifest.xml ‡πÄ‡∏û‡∏¥‡πà‡∏° permissions:

<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
<uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />


Boot receiver (‡πÄ‡∏û‡∏∑‡πà‡∏≠ re-schedule after reboot) ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á AndroidManifest intent-filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö RECEIVE_BOOT_COMPLETED.

NotificationService (channels office_syndrome_channel, office_syndrome_persistent), persistent notification, full-screen intent for urgent, showNotification(session) ‡πÅ‡∏•‡∏∞ _onNotificationTapped(payload) navigation to /todo with session id.

Alarm scheduling: ‡πÉ‡∏ä‡πâ android_alarm_manager_plus ‡πÅ‡∏•‡∏∞ timezone to calculate next valid time (calculateNextNotificationTime, findNextValidTime, shouldNotifyAt).

PermissionService: check & request flow; keep hasRequestedPermissions in UserSettings; show dialog to open App Settings if permanently denied.

UI Pages: Implement UI per spec (Home with LiveCountdownWidget and progress, Todo page showing 2 treatments and Done/Snooze/Skip, Settings with all options incl. language switch, Statistics page). Use Noto Sans Thai/Roboto fonts. Ensure accessibility basics.

HomeController: real-time updates (Timer.periodic) for countdown & progress.

RandomService: deterministic-enough random selection of pain point & 2 non-duplicate treatments from selected pain points.

Snooze & Skip logic: snooze limit 3 per session, snooze does not update lastNotificationTime, skip updates lastNotificationTime to now.

Encryption: store Hive encryption keys in flutter_secure_storage and use for sensitive boxes (sessions/statistics). Provide code to generate and store key on first run.

Localization: intl usage, ARB files for th and en. All UI + notification strings localized.

Tests:

Unit tests for calculateNextNotificationTime, shouldNotifyAt, RandomService selection.

Widget tests: LiveCountdownWidget, Todo page behavior (after ticking treatments).

One integration test for E2E flow (setup ‚Üí trigger test notification ‚Üí todo ‚Üí complete).

Include test/ folder with these tests and a test_report.md summarizing results (pass/fail).

CI (optional): Add simple GitHub Actions workflow ci.yml that runs flutter analyze and flutter test on PRs (recommended but optional).

README.md: Full instructions:

Required Flutter/Dart versions

How to run locally (flutter pub get, flutter packages pub run build_runner build --delete-conflicting-outputs, flutter run)

How to run tests, how to build APK (flutter build apk --release)

How to generate keystore & sign (example steps)

How to test notifications (manual steps), how to reset DB, how to change language

Assumptions list (ASSUMPTIONS.md)

ASSUMPTIONS.md: List any decisions AI made if requirements were ambiguous.

MIGRATION.md: DB versioning & TypeId mapping & example migration steps.

Commit history & PR:

Use branch feature/full-implementation (or specified).

Make commits per feature (see Commit plan below).

Open PR to main with description, acceptance criteria checklist, and list of files changed.

‚úÖ Coding standards / constraints to enforce in the implementation

Null-safety enabled; pass flutter analyze with zero analyzer errors (warnings okay but document them).

No placeholder code. Every file must compile.

Provide inline comments (‡πÑ‡∏ó‡∏¢/EN brief) for important logic (scheduling, permission, encryption).

Keep controllers/services small and testable. Use DI via GetX.

Use constants for all string keys, channel IDs, box names.

All network calls must be absent ‚Äî if a package requires internet during install, document why and how it's used (should not be used at runtime).

üßæ Exact Hive TypeIds and model fields (use these ‚Äî DO NOT change unless documented)

UserSettings ‚Äî typeId = 0

fields: selectedPainPoints (List<int>), notificationInterval (int), workStartTime (TimeOfDay), workEndTime (TimeOfDay), workingDays (List<int>), breakPeriods (List<BreakPeriod>), soundEnabled (bool), vibrationEnabled (bool), notificationEnabled (bool), maxSnoozeCount (int), hasRequestedPermissions (bool), lastNotificationTime (DateTime?), currentSessionId (String?), appVersion (String), dbVersion (int)

NotificationSession ‚Äî typeId = 1

fields: id (String), scheduledTime (DateTime), actualTime (DateTime?), painPointId (int), treatmentIds (List<int>), status (SessionStatus), snoozeCount (int), completedTime (DateTime?), treatmentCompleted (List<bool>)

BreakPeriod ‚Äî typeId = 2

fields: startTime (TimeOfDay), endTime (TimeOfDay), name (String)

(If any additional model is needed, create with a new TypeId and document it in MIGRATION.md.)

üîÅ Commit plan (granular commits ‚Äî ‡∏ä‡∏∑‡πà‡∏≠ commit/message ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ)

chore: init flutter project skeleton + pubspec

feat: implement Hive models + adapters + seed data loader

feat: implement DatabaseService + secure key storage

feat: implement NotificationService + AndroidManifest + Alarm scheduling

feat: implement PermissionService + permission UI flow

feat: implement controllers (Notification, Settings, Home, Statistics)

feat: implement pages and widgets (Home, Todo, Settings, Statistics, LiveCountdown)

feat: implement RandomService + Treatment DB (25 items)

test: add unit/widget/integration tests

docs: add README, ASSUMPTIONS.md, MIGRATION.md

chore: add CI workflow (flutter analyze + test)

chore: final polish + bump version to 1.0.0

‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥‡πÅ‡∏ï‡πà‡∏•‡∏∞ commit ‡πÉ‡∏´‡πâ push ‡πÑ‡∏õ‡∏¢‡∏±‡∏á branch feature/full-implementation. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á PR ‡πÑ‡∏õ‡∏¢‡∏±‡∏á main ‡∏û‡∏£‡πâ‡∏≠‡∏° Checklist ‡πÉ‡∏ô PR description.

üß™ Acceptance Criteria (‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ reviewer/AI ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô merge)

 flutter analyze ‚Üí no errors

 flutter test ‚Üí unit + widget + integration tests pass (record results in test_report.md)

 flutter build apk --release ‚Üí produces app-release.apk (place path in repo or upload to release assets)

 App first-run flow works: Splash ‚Üí Request permissions ‚Üí Select pain points ‚Üí Defaults saved

 Notification scheduling: calculateNextNotificationTime logic valid for corner cases (breaks, non-working days) ‚Äî include unit tests proving logic

 Notification flow: test notification shows, tap opens Todo page with correct session id

 Snooze/Skip behavior per spec, and stats updated accordingly in Hive

 Localization: UI + notifications switch between TH/EN correctly (ARB files present)

 All sensitive Hive boxes encrypted with key stored in flutter_secure_storage (show code to validate)

 README contains explicit instructions to run tests, build, and manual notification tests

üìù If anything is ambiguous ‚Äî rules for the AI to follow:

Make reasonable assumptions, but record all assumptions in ASSUMPTIONS.md.

Prefer completeness over minimal stubs ‚Äî if uncertain about UI wording, provide both Thai and English variants and mark them for review.

Avoid adding third-party services that require network or accounts (Firebase, Sentry, analytics) unless explicitly approved.

If a package version is incompatible with Flutter chosen, choose the nearest compatible version and document the change & reason.

üîö Final request (‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ AI ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ô PR / Chat reply)

‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (path + brief description)

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞ outputs ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è (‡πÄ‡∏ä‡πà‡∏ô flutter analyze success, flutter test summary, flutter build apk location) ‚Äî ‡∏ñ‡πâ‡∏≤ AI ‡∏£‡∏±‡∏ô locally ‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå, ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà ‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏Å expected outputs ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á

PR description ‡∏û‡∏£‡πâ‡∏≠‡∏° Checklist (‡∏ï‡∏≤‡∏° Acceptance Criteria)

ASSUMPTIONS.md ‡πÅ‡∏•‡∏∞ MIGRATION.md ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô